# rippled.cfg - XRPL Validator Configuration
# Lucendex Production Validator
# Optimized for: 4 vCPU / 8GB RAM / 160GB SSD

[server]
port_rpc_admin_local
port_peer
port_ws_admin_local

[port_rpc_admin_local]
port = 5005
ip = 127.0.0.1
admin = 127.0.0.1
protocol = http

[port_peer]
port = 51235
ip = 0.0.0.0
protocol = peer

[port_ws_admin_local]
port = 6006
ip = 127.0.0.1
admin = 127.0.0.1
protocol = ws

#-------------------------------------------------------------------------------

[node_size]
# OPTIMIZED: small for 8GB RAM validator role
# (huge requires 32-64GB RAM and is for serving nodes, not validators)
small

[ledger_history]
# Keep recent 256 ledgers for validation
256

# REMOVED: fetch_depth = full
# Reason: Don't serve unlimited history during sync (starves resources)

[validation_quorum]
# Minimum validations required (default: 3)
3

#-------------------------------------------------------------------------------

[node_db]
type=NuDB
path=/var/lib/rippled/db/nudb
advisory_delete=0
online_delete=512
# TEMPORARY: Reduced from 2000 to 512 during initial sync
# Will restore to 2000 after reaching tip
# REMOVED: earliest_seq=32570
# Reason: Don't force backfill to ancient ledgers on 8GB RAM

[database_path]
/var/lib/rippled/db

[debug_logfile]
/var/log/rippled/debug.log

[sntp_servers]
time.windows.com
time.apple.com
time.nist.gov
pool.ntp.org

#-------------------------------------------------------------------------------

# Use online validator list (UNL) instead of static file
[validator_list_sites]
https://vl.ripple.com
https://unl.xrplf.org

[validator_list_keys]
# XRPL Foundation (primary)
ED42AEC58B701EEBB77356FFFEC26F83C1F0407263530F068C7C73D392C7E06FD1
# Ripple (legacy)
ED2677ABFFD1B33AC6FBC3062B71F1E8397C1505E1C42C64D11AD1B28FF73F4734

[ips]
r.ripple.com 51235
zaphod.alloy.ee 51235
sahyadri.isrdc.in 51235

[ips_fixed]
# Add fixed peer IPs here if needed

#-------------------------------------------------------------------------------

[rpc_startup]
{ "command": "log_level", "severity": "warning" }

[ssl_verify]
1

[ssl_verify_file]
/etc/ssl/certs/ca-certificates.crt

[ssl_verify_dir]
/etc/ssl/certs

#-------------------------------------------------------------------------------

# Performance tuning (optimized for 4 vCPU)
[io_workers]
4

[prefetch_workers]
2

[workers]
4

#-------------------------------------------------------------------------------

# Log rotation
[log_level]
warning

[log_rotation]
10

[log_file_max]
50MB

#-------------------------------------------------------------------------------

# Network settings
[overlay]
public_ip_detect = 1

[peer_private]
0

[network_id]
# Mainnet (default)
# Leave commented for mainnet

#-------------------------------------------------------------------------------

# Storage optimization
# Note: online_delete configured in [node_db] section above

[advisory_delete]
0

# Compression
[compression]
true

#-------------------------------------------------------------------------------

# Path finding (conservative for validator role)
[path_search]
7

[path_search_fast]
2

[path_search_max]
10

#-------------------------------------------------------------------------------

# Fee voting (default values)
[voting]
reference_fee = 10
account_reserve = 10000000
owner_reserve = 2000000

#-------------------------------------------------------------------------------

# Performance monitoring
[insight]
server = 0
ledger = 0
manifest = 0
# Add this to rippled.cfg
# Replace any existing [validation_seed] or [validator_token] section

[validator_token]
eyJtYW5pZmVzdCI6IkpBQUFBQUZ4SWUwaUtTTHpibVA5ajJDOTY4NGZ2cDlERHd0bmdZRFF4
